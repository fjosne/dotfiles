#!/usr/bin/sh

CHANGE=$1

MSGID="93485"

[[ -z $CHANGE ]] && echo "Provide command volume value" && exit

amixer -D pulse sset Master $CHANGE > /dev/null

vol="$(amixer -D pulse get Master | tail -1 |  awk -F '[][]' '{print $2}')" #awk '{print $4}' | sed 's/[^0-9]*//g')"
mute="$(amixer -D pulse get Master | tail -1 | awk '{print $5}' | sed 's/[^a-z]*//g')"

[[ "$vol" == "0" || "$mute" == "off" ]] && dunstify -a "volctrl" -u low -i audio-volume-muted -r "$MSGID" "Muted" && exit

dunstify -a "volctrl" -u low -i audio-volume-high -r "$MSGID" -h int:value:"$vol" "Volume: ${vol}%"
